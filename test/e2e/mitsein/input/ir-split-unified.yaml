openapi: 3.1.0
info:
  title: Mitsein API
  version: 0.1.0
  description: |
    Mitsein API - Elysia implementation

    This OpenAPI specification is split into multiple files for better maintainability:
    - `api/*.yaml` - Route definitions grouped by module
    - `components/schemas/*.yaml` - Schema definitions (one per file)
    - `components/parameters/*.yaml` - Parameter definitions (one per file)
    - `components/responses/*.yaml` - Response definitions (one per file)
paths:
  /api/message/add:
    post:
      tags:
        - messages
      summary: Message Add
      operationId: message_add_api_message_add_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: MessageAddRequestBody
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/message/add-theme:
    post:
      tags:
        - messages
      summary: Message Add Theme
      description: Add a theme message to a thread.
      operationId: message_add_theme_api_message_add_theme_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: AddThemeMessageRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/message/add-chart:
    post:
      tags:
        - messages
      summary: Message Add Chart
      description: Add a chart message to a thread.
      operationId: message_add_chart_api_message_add_chart_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: AddChartMessageRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/message/list:
    post:
      tags:
        - messages
      summary: Message List
      description: List messages for a thread.
      operationId: message_list_api_message_list_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ListMessagesRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/list:
    post:
      tags:
        - threads
      summary: Thread List
      operationId: thread_list_api_thread_list_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ThreadListRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/search:
    post:
      tags:
        - threads
      summary: Thread Search
      operationId: thread_search_api_thread_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ThreadSearchRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/get:
    post:
      tags:
        - threads
      summary: Thread Get
      operationId: thread_get_api_thread_get_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ThreadGetRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/create:
    post:
      tags:
        - threads
      summary: Thread Create
      operationId: thread_create_api_thread_create_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ThreadCreateRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/share/thread/get:
    post:
      tags:
        - threads
      summary: Share Thread Get
      operationId: share_thread_get_api_share_thread_get_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ThreadGetRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/{thread_id}/agent/start:
    post:
      tags:
        - agent-runs
      summary: Start Agent
      description: Start an agent for a specific thread in the background.
      operationId: start_agent_api_thread__thread_id__agent_start_post
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: AgentStartRequestBody
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/thread/{thread_id}/agent-runs:
    post:
      tags:
        - agent-runs
      summary: Get Agent Runs
      description: Get all agent runs for a thread.
      operationId: get_agent_runs_api_thread__thread_id__agent_runs_post
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/agent-run/{agent_run_id}/stop:
    post:
      tags:
        - agent-runs
      summary: Stop Agent
      description: Stop a running agent.
      operationId: stop_agent_api_agent_run__agent_run_id__stop_post
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/agent-run/{agent_run_id}:
    post:
      tags:
        - agent-runs
      summary: Get Agent Run
      description: Get agent run status and responses.
      operationId: get_agent_run_api_agent_run__agent_run_id__post
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/agent-run/{agent_run_id}/stream:
    get:
      tags:
        - agent-runs
      summary: Stream Agent Run
      description: Stream the responses of an agent run from Redis storage or reconnect to ongoing run.
      operationId: stream_agent_run_api_agent_run__agent_run_id__stream_get
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/agent/quick-start:
    post:
      tags:
        - quick-start
      summary: Quick Start
      description: |-
        Create a project, thread, message, and start agent in a single atomic operation.

        This endpoint reduces the number of round trips required to start an agent conversation
        from 4 separate calls to 1, significantly improving startup latency.
      operationId: quick_start_api_agent_quick_start_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: QuickStartRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: QuickStartResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/list:
    post:
      tags:
        - projects
      summary: Project List
      operationId: project_list_api_project_list_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/project/get:
    post:
      tags:
        - projects
      summary: Project Get
      operationId: project_get_api_project_get_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: GetProjectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/create:
    post:
      tags:
        - projects
      summary: Project Create
      operationId: project_create_api_project_create_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: CreateProjectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/update:
    post:
      tags:
        - projects
      summary: Project Update
      operationId: project_update_api_project_update_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: UpdateProjectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/delete:
    post:
      tags:
        - projects
      summary: Project Delete
      operationId: project_delete_api_project_delete_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: DeleteProjectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/bulk-delete:
    post:
      tags:
        - projects
      summary: Project Bulk Delete
      description: Bulk delete multiple projects - for admin/debug purposes
      operationId: project_bulk_delete_api_project_bulk_delete_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: BulkDeleteRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/share/project/get:
    post:
      tags:
        - sharing
      summary: Share Project Get
      operationId: share_project_get_api_share_project_get_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: GetProjectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files:
    get:
      tags:
        - sandbox
      summary: List Project Files
      description: List files in the project's sandbox.
      operationId: list_project_files_api_project__project_id__files_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            title: Path
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
    delete:
      tags:
        - sandbox
      summary: Delete Project File
      description: Delete a file from the project's sandbox.
      operationId: delete_project_file_api_project__project_id__files_delete
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            description: File path to delete
            title: Path
          description: File path to delete
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
    post:
      tags:
        - sandbox
      summary: Create Project File
      description: Create a file in the project's sandbox using direct file upload
      operationId: create_project_file_api_project__project_id__files_post
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: Body_create_project_file_api_project__project_id__files_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/content:
    get:
      tags:
        - sandbox
      summary: Read Project File
      description: |-
        Read a file from the project's sandbox with streaming support.

        This endpoint now supports:
        - Streaming for large files to avoid memory issues
        - Optional caching for small files (<64KB) when cache-busting parameter is not present
        - Partial downloads (Range requests) for video/audio streaming
        - Cache bypass with _t parameter (always fetch fresh from Azure Storage)
      operationId: read_project_file_api_project__project_id__files_content_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            title: Path
        - name: _t
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: ' T'
        - name: Range
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Range
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/batch-download:
    post:
      tags:
        - sandbox
      summary: Batch Download Files
      description: Download multiple files from the project as a zip archive with concurrency control.
      operationId: batch_download_files_api_project__project_id__files_batch_download_post
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: BatchDownloadRequest
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/preview/stream:
    get:
      tags:
        - sandbox
      summary: Preview Project File Stream
      description: |-
        Stream preview of an HTML file from the project's sandbox.

        This endpoint uses a producer-consumer pattern with a heartbeat to maintain
        a long-lived connection, even during long-running backend operations.
      operationId: preview_project_file_stream_api_project__project_id__files_preview_stream_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            title: Path
        - name: cachedPreviewUrl
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Cachedpreviewurl
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/preview:
    get:
      tags:
        - sandbox
      summary: Preview Project File
      description: Preview an HTML file from the project's sandbox.
      operationId: preview_project_file_api_project__project_id__files_preview_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            title: Path
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/docx:
    get:
      tags:
        - sandbox
      summary: Get Docx File
      description: Get Word document, using cached version if available or converting from markdown.
      operationId: get_docx_file_api_project__project_id__files_docx_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: path
          in: query
          required: true
          schema:
            type: string
            title: Path
        - name: open_in_onedrive
          in: query
          required: false
          schema:
            type: boolean
            description: Open in OneDrive instead of downloading
            default: false
            title: Open In Onedrive
          description: Open in OneDrive instead of downloading
        - name: user-token
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            description: Microsoft Graph API token for OneDrive upload
            title: User-Token
          description: Microsoft Graph API token for OneDrive upload
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/presentation:
    get:
      tags:
        - sandbox
      summary: Get Project Presentation
      description: Read the presentation file from the project's sandbox and convert to pptx.
      operationId: get_project_presentation_api_project__project_id__presentation_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: open_in_onedrive
          in: query
          required: false
          schema:
            type: boolean
            description: Open in OneDrive instead of downloading
            default: false
            title: Open In Onedrive
          description: Open in OneDrive instead of downloading
        - name: user-token
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            description: Microsoft Graph API token for OneDrive upload
            title: User-Token
          description: Microsoft Graph API token for OneDrive upload
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/presentation/{sub_folder_path}:
    get:
      tags:
        - sandbox
      summary: Get Project Presentation Subfolder
      description: Read the presentation file from a specific subfolder in the project's sandbox and convert to pptx.
      operationId: get_project_presentation_subfolder_api_project__project_id__presentation__sub_folder_path__get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: sub_folder_path
          in: path
          required: true
          schema:
            type: string
            title: Sub Folder Path
        - name: open_in_onedrive
          in: query
          required: false
          schema:
            type: boolean
            description: Open in OneDrive instead of downloading
            default: false
            title: Open In Onedrive
          description: Open in OneDrive instead of downloading
        - name: user-token
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            description: Microsoft Graph API token for OneDrive upload
            title: User-Token
          description: Microsoft Graph API token for OneDrive upload
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/webappfiles:
    get:
      tags:
        - sandbox
      summary: Get Project Webappfiles
      description: Get the webapp files from the project's sandbox.
      operationId: get_project_webappfiles_api_project__project_id__webappfiles_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/onedrive/export:
    post:
      tags:
        - sandbox
      summary: Export To Onedrive
      description: Generic endpoint to export any file to OneDrive.
      operationId: export_to_onedrive_api_project__project_id__onedrive_export_post
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: user-token
          in: header
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            description: Microsoft Graph API token for OneDrive upload
            title: User-Token
          description: Microsoft Graph API token for OneDrive upload
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: Body_export_to_onedrive_api_project__project_id__onedrive_export_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/sandbox/url:
    get:
      tags:
        - sandbox
      summary: Get Project Sandbox Url
      description: |-
        Get sandbox URL for a specific port. Creates sandbox on-demand if needed.
        This endpoint is used by frontend components that need to display sandbox URLs.
      operationId: get_project_sandbox_url_api_project__project_id__sandbox_url_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: port
          in: query
          required: false
          schema:
            type: integer
            description: Port to get URL for (default 8080 for E2B sandbox HTTP)
            default: 8080
            title: Port
          description: Port to get URL for (default 8080 for E2B sandbox HTTP)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/project/{project_id}/files/url:
    get:
      tags:
        - sandbox
      summary: Get Project Files Url
      description: |-
        Get files URL for a project. Returns Azure Storage URLs with SAS tokens.
        This endpoint provides access to project files via Azure Storage.
      operationId: get_project_files_url_api_project__project_id__files_url_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/projects/{project_id}/files/upload:
    post:
      tags:
        - files
      summary: Upload Project File
      description: |-
        Upload a file to the project's filesystem.

        If thread_id is provided and the file is a presentation slide, this will also
        update the corresponding toolCall in the database to preserve edited content
        for AI iteration.
      operationId: upload_project_file_api_projects__project_id__files_upload_post
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: Body_upload_project_file_api_projects__project_id__files_upload_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/projects/{project_id}/files/info:
    get:
      tags:
        - files
      summary: Get Project File Info
      description: Get file information including size for a specific file in the project.
      operationId: get_project_file_info_api_projects__project_id__files_info_get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
        - name: file_path
          in: query
          required: true
          schema:
            type: string
            title: File Path
        - name: is_user_uploaded
          in: query
          required: true
          schema:
            type: boolean
            title: Is User Uploaded
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/tools/list:
    get:
      tags:
        - tools
      summary: List Tools
      description: |-
        List all available tools.

        Note: MCP/Smithery marketplace integration has been removed.
        Returns empty list for now.
      operationId: list_tools_api_tools_list_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/tools/check-video-status:
    post:
      tags:
        - tools
      summary: Check Video Status
      description: Check the status of a video generation operation.
      operationId: check_video_status_api_tools_check_video_status_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/approve:
    post:
      tags:
        - connectors
      summary: Approve Write Operation
      description: Update user's decision on a pending write approval.
      operationId: approve_write_operation_api_connectors_approve_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ApprovalDecisionRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/execute:
    post:
      tags:
        - connectors
      summary: Execute Approved Write
      description: Execute an approved write operation and return the connector result.
      operationId: execute_approved_write_api_connectors_execute_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ExecuteWriteRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/disconnect:
    post:
      tags:
        - connectors
      summary: Disconnect Connector
      description: Revoke a connector authorization for the current account.
      operationId: disconnect_connector_api_connectors_disconnect_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: DisconnectRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/activity:
    get:
      tags:
        - connectors
      summary: Get Write Activity
      description: Return recent write activity for the current account.
      operationId: get_write_activity_api_connectors_activity_get
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 50
            title: Limit
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            default: 0
            title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/list:
    get:
      tags:
        - connectors
      summary: List User Connectors
      description: List connector authorizations for the current account.
      operationId: list_user_connectors_api_connectors_list_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/connectors/{connector_id}/authorize:
    post:
      tags:
        - connectors
      summary: Initiate Oauth
      description: Start OAuth authorization flow for a connector.
      operationId: initiate_oauth_api_connectors__connector_id__authorize_post
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: OAuthInitiateRequest
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: OAuthInitiateResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/{connector_id}/callback:
    get:
      tags:
        - connectors
      summary: Handle Oauth Callback
      description: Handle OAuth callback and persist authorization.
      operationId: handle_oauth_callback_api_connectors__connector_id__callback_get
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
        - name: code
          in: query
          required: true
          schema:
            type: string
            title: Code
        - name: state
          in: query
          required: true
          schema:
            type: string
            title: State
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: OAuthCallbackResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/{connector_id}/files:
    get:
      tags:
        - connectors
      summary: List Files
      description: List files for a connector using the connector manager.
      operationId: list_files_api_connectors__connector_id__files_get
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
        - name: folder_id
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Folder Id
        - name: page_size
          in: query
          required: false
          schema:
            type: integer
            maximum: 1000
            minimum: 1
            default: 50
            title: Page Size
        - name: page_token
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Page Token
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: FileListResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
    post:
      tags:
        - connectors
      summary: Upload File
      description: Upload a file to the connector (e.g., Google Drive).
      operationId: upload_file_api_connectors__connector_id__files_post
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: FileUploadRequest
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: FileUploadResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/{connector_id}/files/search:
    get:
      tags:
        - connectors
      summary: Search Files
      description: Search files for a connector.
      operationId: search_files_api_connectors__connector_id__files_search_get
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
        - name: query
          in: query
          required: true
          schema:
            type: string
            description: Search query
            title: Query
          description: Search query
        - name: page_size
          in: query
          required: false
          schema:
            type: integer
            maximum: 1000
            minimum: 1
            default: 50
            title: Page Size
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: FileListResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/connectors/{connector_id}/documents/{document_id}:
    get:
      tags:
        - connectors
      summary: Read Document
      description: Read a single document from a connector.
      operationId: read_document_api_connectors__connector_id__documents__document_id__get
      parameters:
        - name: connector_id
          in: path
          required: true
          schema:
            type: string
            title: Connector Id
        - name: document_id
          in: path
          required: true
          schema:
            type: string
            title: Document Id
        - name: include_raw
          in: query
          required: false
          schema:
            type: boolean
            default: false
            title: Include Raw
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: DocumentReadResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/favorites/add:
    post:
      tags:
        - favorites
      summary: Add Favorite
      description: Add an entity to favorites.
      operationId: add_favorite_api_favorites_add_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FavoriteAddRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/favorites/remove:
    post:
      tags:
        - favorites
      summary: Remove Favorite
      description: |-
        Remove an entity from favorites.

        Note: Does not require entity access check - user can always remove their own favorites.
      operationId: remove_favorite_api_favorites_remove_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FavoriteRemoveRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/favorites/toggle:
    post:
      tags:
        - favorites
      summary: Toggle Favorite
      description: Toggle favorite status for an entity.
      operationId: toggle_favorite_api_favorites_toggle_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FavoriteToggleRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Toggle Favorite Api Favorites Toggle Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/favorites/list:
    post:
      tags:
        - favorites
      summary: List Favorites
      description: List user's favorites with entity details.
      operationId: list_favorites_api_favorites_list_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FavoriteListRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response List Favorites Api Favorites List Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/favorites/count:
    post:
      tags:
        - favorites
      summary: Count Favorites
      description: Get count of user's favorites.
      operationId: count_favorites_api_favorites_count_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FavoriteListRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Count Favorites Api Favorites Count Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/workflow/list:
    get:
      tags:
        - workflows
      summary: Workflow List
      description: |-
        List all available workflows.

        Returns workflow metadata (id, name, desc) without actual content.
        Requires authentication.
      operationId: workflow_list_api_workflow_list_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/workflow/{workflow_id}/details:
    get:
      tags:
        - workflows
      summary: Workflow Get Details
      description: |-
        Get workflow details by ID.

        Returns the workflow metadata and raw file content.
        Requires authentication.
      operationId: workflow_get_details_api_workflow__workflow_id__details_get
      parameters:
        - name: workflow_id
          in: path
          required: true
          schema:
            type: string
            title: Workflow Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/auth/google/initiate:
    post:
      tags:
        - auth
      summary: Initiate Google Auth
      description: |-
        Initiate Google OAuth flow.

        Returns authorization URL for frontend to redirect to.
      operationId: initiate_google_auth_api_auth_google_initiate_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: GoogleAuthInitiateResponse
  /api/auth/google/callback:
    get:
      tags:
        - auth
      summary: Handle Google Callback
      description: |-
        Handle Google OAuth callback.

        Exchange authorization code for access token and get user info.
      operationId: handle_google_callback_api_auth_google_callback_get
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
            description: Authorization code from Google
            title: Code
          description: Authorization code from Google
        - name: state
          in: query
          required: true
          schema:
            type: string
            description: State parameter for CSRF protection
            title: State
          description: State parameter for CSRF protection
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: GoogleAuthCallbackResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/create:
    post:
      tags:
        - user
      summary: User Create
      operationId: user_create_api_user_create_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/get:
    post:
      tags:
        - user
      summary: User Get
      operationId: user_get_api_user_get_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/update-throttle-rule:
    post:
      tags:
        - user
      summary: Update Throttle Rule
      description: |-
        Update throttle rules for an account

        Example request body:
        {
            "daily_thread_limit": {
                "enabled": true,
                "max_threads": 50,
                "reset_timezone": "UTC"
            },
            "concurrent_agents_limit": {
                "enabled": true,
                "max_concurrent": 3
            }
        }
      operationId: update_throttle_rule_api_user_update_throttle_rule_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: UpdateThrottleRuleRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/check-owner:
    get:
      tags:
        - user
      summary: Check Owner
      description: Check if the current user has owner role in any account.
      operationId: check_owner_api_user_check_owner_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/cred:
    post:
      tags:
        - user
      summary: Get User Credentials
      description: Get user credentials including daily thread count and agent runs for today.
      operationId: get_user_credentials_api_user_cred_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/gdpr-consent:
    get:
      tags:
        - user
      summary: Get Gdpr Consent
      description: Get GDPR consent status for the current user's account.
      operationId: get_gdpr_consent_api_user_gdpr_consent_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
    post:
      tags:
        - user
      summary: Update Gdpr Consent
      description: |-
        Update GDPR consent status for the current user's account.

        Request body example:
        {
            "gdpr_consent": true
        }
      operationId: update_gdpr_consent_api_user_gdpr_consent_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: UpdateGdprConsentRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/delete-personal-data:
    post:
      tags:
        - user
      summary: Delete Personal Data
      description: |-
        Delete all personal data for the current user's account.
        This is a permanent action that cannot be undone and is intended for GDPR compliance.

        Returns a summary of deleted data counts.
      operationId: delete_personal_data_api_user_delete_personal_data_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/export-personal-data:
    get:
      tags:
        - user
      summary: Export Personal Data
      description: |-
        Export all user-related data for GDPR compliance and data portability.

        This endpoint calls the stored procedure to collect all data associated
        with the user's account including projects, threads, recordings, devices.
        And direct call db api to get messages.

        Note: This endpoint can only be called once per user at runtime to prevent
        concurrent exports that could cause resource conflicts.

        Returns:
            JSON response with S3 Storage URL where the exported data ZIP file is stored
      operationId: export_personal_data_api_user_export_personal_data_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/skills:
    get:
      tags:
        - user
      summary: Get User Skills
      description: |-
        Get all available skills and the current user's enabled skills.

        Returns:
            {
                "available_skills": [
                    {
                        "name": "pdf",
                        "description": "PDF processing skill",
                        "version": "1.0.0",
                        "category": "document",
                        "enabled": true
                    },
                    ...
                ]
            }
      operationId: get_user_skills_api_user_skills_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/user/skills/toggle:
    post:
      tags:
        - user
      summary: Toggle Skill
      description: |-
        Toggle a skill's enabled status for the current user.

        Request body:
            {
                "skill_name": "pdf",
                "enabled": true
            }

        Returns:
            {
                "status": "success",
                "skill_name": "pdf",
                "enabled": true
            }
      operationId: toggle_skill_api_user_skills_toggle_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ToggleSkillRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/skills/{skill_name}:
    get:
      tags:
        - user
      summary: Get Skill Detail
      description: |-
        Get detailed information about a specific skill including all available operations.

        Args:
            skill_name: Name of the skill to get details for

        Returns:
            {
                "name": "pdf",
                "description": "PDF processing skill",
                "version": "1.0.0",
                "category": "document",
                "author": "Anthropic",
                "operations": [
                    {
                        "name": "check_fillable_fields",
                        "parameters": ["file_path"],
                        "description": ""
                    },
                    ...
                ]
            }
      operationId: get_skill_detail_api_user_skills__skill_name__get
      parameters:
        - name: skill_name
          in: path
          required: true
          schema:
            type: string
            title: Skill Name
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
    delete:
      tags:
        - user
      summary: Delete Uploaded Skill
      description: |-
        Delete an uploaded skill from S3 Storage.

        Args:
            skill_name: Name of the skill to delete

        Returns:
            {
                "success": true,
                "message": "Skill deleted successfully",
                "skill_name": "name"
            }
      operationId: delete_uploaded_skill_api_user_skills__skill_name__delete
      parameters:
        - name: skill_name
          in: path
          required: true
          schema:
            type: string
            title: Skill Name
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/skills/upload:
    post:
      tags:
        - user
      summary: Upload Skill
      description: |-
        Upload a skill zip file to Azure Storage.

        Args:
            file: ZIP file containing the skill files

        Returns:
            SkillMetadata object with skill information
      operationId: upload_skill_api_user_skills_upload_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: Body_upload_skill_api_user_skills_upload_post
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/user/preferences/file-summarization:
    get:
      tags:
        - user
      summary: Get File Summarization Preferences Endpoint
      description: |-
        Get user's file summarization preferences.

        Returns:
            {
                "enable_smart_summarization": true
            }
      operationId: get_file_summarization_preferences_endpoint_api_user_preferences_file_summarization_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: FileSummarizationPreferences
    post:
      tags:
        - user
      summary: Save File Summarization Preferences Endpoint
      description: |-
        Save user's file summarization preferences.

        Args:
            preferences: {
                "enable_smart_summarization": true/false
            }

        Returns:
            {
                "success": true,
                "message": "Preferences saved successfully"
            }
      operationId: save_file_summarization_preferences_endpoint_api_user_preferences_file_summarization_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FileSummarizationPreferences
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Save File Summarization Preferences Endpoint Api User Preferences File Summarization Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/usage/admin/overview:
    get:
      tags:
        - usage-admin
      summary: Get Usage Overview
      description: Overview KPIs + trend for admin dashboard.
      operationId: get_usage_overview_api_usage_admin_overview_get
      parameters:
        - name: start_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: Start Date
        - name: end_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: End Date
        - name: provider
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Provider
        - name: model
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Model
        - name: task_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Task Type
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/usage/admin/daily:
    get:
      tags:
        - usage-admin
      summary: Get Daily Usage
      description: Paginated daily summaries.
      operationId: get_daily_usage_api_usage_admin_daily_get
      parameters:
        - name: start_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: Start Date
        - name: end_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: End Date
        - name: provider
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Provider
        - name: model
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Model
        - name: task_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Task Type
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            title: Page
        - name: page_size
          in: query
          required: false
          schema:
            type: integer
            maximum: 200
            minimum: 1
            default: 50
            title: Page Size
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/usage/admin/events:
    get:
      tags:
        - usage-admin
      summary: Get Usage Events Endpoint
      description: Paginated usage events (admin).
      operationId: get_usage_events_endpoint_api_usage_admin_events_get
      parameters:
        - name: start_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: Start Date
        - name: end_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: End Date
        - name: provider
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Provider
        - name: model
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Model
        - name: task_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Task Type
        - name: status
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Status
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            title: Page
        - name: page_size
          in: query
          required: false
          schema:
            type: integer
            maximum: 200
            minimum: 1
            default: 50
            title: Page Size
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/usage/admin/pricing:
    get:
      tags:
        - usage-admin
      summary: Get Pricing
      description: Return latest pricing entries (for UI caching).
      operationId: get_pricing_api_usage_admin_pricing_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/usage/admin/quota:
    get:
      tags:
        - usage-admin
      summary: Get Quota
      description: Return quota config + counters for the requesting admin account.
      operationId: get_quota_api_usage_admin_quota_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/usage/admin/export:
    get:
      tags:
        - usage-admin
      summary: Export Usage Events
      description: Export usage events in CSV or JSON.
      operationId: export_usage_events_api_usage_admin_export_get
      parameters:
        - name: export_format
          in: query
          required: false
          schema:
            type: string
            pattern: ^(csv|json)$
            default: csv
            title: Export Format
        - name: start_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: Start Date
        - name: end_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            title: End Date
        - name: provider
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Provider
        - name: model
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Model
        - name: task_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Task Type
        - name: status
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Status
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            maximum: 5000
            minimum: 1
            default: 1000
            title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/admin/projects/list:
    get:
      tags:
        - admin-projects
      summary: List All Projects
      description: |-
        List all projects across all accounts (admin only).

        Returns paginated list of all projects in the system.
        Only non-encrypted fields are returned since we cannot decrypt
        other users' data.

        Args:
            page: Page number (1-based)
            page_size: Number of items per page (1-200)
            order_by: Field to order by (default: updated_at)
            desc: Order descending if True
            account_id: The authenticated user's account ID

        Returns:
            Dict with items (list of projects), page, page_size, and total count
      operationId: list_all_projects_api_admin_projects_list_get
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            description: Page number (1-based)
            default: 1
            title: Page
          description: Page number (1-based)
        - name: page_size
          in: query
          required: false
          schema:
            type: integer
            maximum: 200
            minimum: 1
            description: Items per page
            default: 50
            title: Page Size
          description: Items per page
        - name: order_by
          in: query
          required: false
          schema:
            type: string
            description: Field to order by
            default: updated_at
            title: Order By
          description: Field to order by
        - name: desc
          in: query
          required: false
          schema:
            type: boolean
            description: Order descending
            default: true
            title: Desc
          description: Order descending
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/admin/projects/count:
    get:
      tags:
        - admin-projects
      summary: Get Projects Count
      description: |-
        Get total count of all projects (admin only).

        Returns:
            Dict with total count of projects
      operationId: get_projects_count_api_admin_projects_count_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/admin/projects/bulk-delete:
    post:
      tags:
        - admin-projects
      summary: Admin Bulk Delete Projects
      description: |-
        Bulk delete projects across all accounts (admin only).

        This endpoint bypasses normal permission checks and can delete
        any project in the system. Use with caution.

        Args:
            body: Request body containing list of project_ids to delete
            account_id: The authenticated user's account ID

        Returns:
            Dict with deleted count, failed items, and totals
      operationId: admin_bulk_delete_projects_api_admin_projects_bulk_delete_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: AdminBulkDeleteRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/admin/usage/overview:
    get:
      tags:
        - admin-usage
      summary: Get Global Usage Overview
      description: |-
        Get global usage statistics aggregated across all accounts (admin only).

        Args:
            start_date: Start of date range (defaults to 30 days ago)
            end_date: End of date range (defaults to today)
            account_id: The authenticated user's account ID

        Returns:
            Dict with summary containing aggregated usage metrics for the date range
      operationId: get_global_usage_overview_api_admin_usage_overview_get
      parameters:
        - name: start_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            description: Start date (defaults to 30 days ago)
            title: Start Date
          description: Start date (defaults to 30 days ago)
        - name: end_date
          in: query
          required: false
          schema:
            anyOf:
              - type: string
                format: date
              - type: 'null'
            description: End date (defaults to today)
            title: End Date
          description: End date (defaults to today)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/list:
    get:
      tags:
        - ai-presenter
      summary: Get Voiceprint List
      description: |-
        Get list of all voiceprints with their training status using BatchListMegaTTSTrainStatus API.

        Returns:
            VolcengineTrainingListResponse containing list of voiceprint training status information
      operationId: get_voiceprint_list_api_ai_presenter_list_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VolcengineTrainingListResponse
  /api/ai-presenter/training:
    post:
      tags:
        - ai-presenter
      summary: Train Voiceprint
      description: |-
        Train a specific voiceprint with new audio data.

        Args:
            speaker_id: The speaker ID to train
            audio_file: Audio file for training (WAV format recommended)
            language: Language for training (0=Chinese, 1=English)
            text: Optional text that was read during recording

        Returns:
            VolcengineBaseResponse containing success status and error message if failed
      operationId: train_voiceprint_api_ai_presenter_training_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: Body_train_voiceprint_api_ai_presenter_training_post
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VolcengineBaseResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/presentation_info/{project_id}:
    get:
      tags:
        - ai-presenter
      summary: Get Presentation Info
      description: |-
        Get presentation information from workspace info.json file.

        Args:
            project_id: The project ID to get presentation info for

        Returns:
            Dictionary containing slide information or empty dict if file doesn't exist
      operationId: get_presentation_info_api_ai_presenter_presentation_info__project_id__get
      parameters:
        - name: project_id
          in: path
          required: true
          schema:
            type: string
            title: Project Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
                title: Response Get Presentation Info Api Ai Presenter Presentation Info  Project Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/tts:
    post:
      tags:
        - ai-presenter
      summary: Generate Tts For Slide
      description: |-
        Generate TTS audio for a specific slide.

        Args:
            request: TTSRequest containing speaker_id, script_text, slide_filename, and project_id

        Returns:
            VolcengineBaseResponse with success status and error message if failed
      operationId: generate_tts_for_slide_api_ai_presenter_tts_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: TTSRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VolcengineBaseResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/avatar:
    post:
      tags:
        - ai-presenter
      summary: Upload Avatar
      description: |-
        Upload avatar image for a speaker.

        Args:
            project_id: The project ID
            speaker_id: The speaker ID to upload avatar for
            avatar_file: Avatar image file (max 5MB, PNG/JPG/JPEG supported)

        Returns:
            VolcengineBaseResponse with success status and error message if failed
      operationId: upload_avatar_api_ai_presenter_avatar_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: Body_upload_avatar_api_ai_presenter_avatar_post
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VolcengineBaseResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/generate_video:
    post:
      tags:
        - ai-presenter
      summary: Generate Video From Assets
      description: |-
        Generate video using HeyGen from image and audio assets.

        Args:
            request: Video generation request with project info
            image_file: Avatar image file
            audio_file: Audio narration file

        Returns:
            VideoGenerationResponse with video generation result
      operationId: generate_video_from_assets_api_ai_presenter_generate_video_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: Body_generate_video_from_assets_api_ai_presenter_generate_video_post
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VideoGenerationResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/ai-presenter/video_status/{video_id}:
    get:
      tags:
        - ai-presenter
      summary: Get Video Generation Status
      description: |-
        Get HeyGen video generation status.

        Args:
            video_id: HeyGen video ID

        Returns:
            VideoGenerationResponse with current status
      operationId: get_video_generation_status_api_ai_presenter_video_status__video_id__get
      parameters:
        - name: video_id
          in: path
          required: true
          schema:
            type: string
            title: Video Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VideoGenerationResponse
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/suggestions/generate:
    post:
      tags:
        - suggestions
      summary: Generate Suggestions
      description: |-
        Generate follow-up suggestions for a thread.

        Args:
            request: FastAPI request object
            body: Request body with thread_id and optional limit

        Returns:
            List of suggestion strings
      operationId: generate_suggestions_api_suggestions_generate_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: GenerateSuggestionsRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/memory/list:
    post:
      tags:
        - memory
      summary: List Memories Endpoint
      description: List all memories for a user.
      operationId: list_memories_endpoint_api_memory_list_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response List Memories Endpoint Api Memory List Post
  /api/memory/add:
    post:
      tags:
        - memory
      summary: Add Memory Endpoint
      description: Add a new memory for a user.
      operationId: add_memory_endpoint_api_memory_add_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Add Memory Endpoint Api Memory Add Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/memory/update:
    post:
      tags:
        - memory
      summary: Update Memory Endpoint
      description: Update an existing memory.
      operationId: update_memory_endpoint_api_memory_update_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Update Memory Endpoint Api Memory Update Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/memory/delete:
    post:
      tags:
        - memory
      summary: Delete Memory Endpoint
      description: Delete a memory.
      operationId: delete_memory_endpoint_api_memory_delete_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Delete Memory Endpoint Api Memory Delete Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/memory/search:
    post:
      tags:
        - memory
      summary: Search Memories Endpoint
      description: Search memories for a user.
      operationId: search_memories_endpoint_api_memory_search_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
                title: Response Search Memories Endpoint Api Memory Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/memory/upload-document:
    post:
      tags:
        - memory
      summary: Upload Document Endpoint
      description: Upload and process a document into memories.
      operationId: upload_document_endpoint_api_memory_upload_document_post
      parameters:
        - name: document_name
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Document Name
        - name: max_tokens
          in: query
          required: false
          schema:
            anyOf:
              - type: integer
              - type: 'null'
            default: 400
            title: Max Tokens
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: Body_upload_document_endpoint_api_memory_upload_document_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
                title: Response Upload Document Endpoint Api Memory Upload Document Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/environment:
    get:
      tags:
        - debug
      summary: Get Environment
      description: |-
        The environment variable keys are sourced from the `backend.env` section
        of /workspaces/mitsein-agent/deployment/kubernetes/configs/common/aks.yaml.
        The value is the actual environment variable value, or 'n/a' if not set.
      operationId: get_environment_api_debug_environment_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/debug/frontend-logs:
    post:
      tags:
        - debug
      summary: Receive Frontend Logs
      description: Receive frontend logs and print them to the backend logger with [Frontend] tag.
      operationId: receive_frontend_logs_api_debug_frontend_logs_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: FrontendLogsRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/config/llm:
    get:
      tags:
        - debug
      summary: Get Llm Config
      description: |-
        Get LLM configuration and parameter limits.

        This endpoint returns:
        - Parameter limits (temperature, max_tokens, etc.)
        - Available models
        - Default values

        WARNING: This endpoint is for development/testing only.

        Returns:
            LLMConfigResponse: LLM configuration details
      operationId: get_llm_config_api_debug_config_llm_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: LLMConfigResponse
  /api/debug/test/agent-run:
    post:
      tags:
        - debug
        - test
      summary: Create Local Test Agent Run
      description: |-
        Create an agent run for local testing without authentication.

        This endpoint is for local testing only and bypasses authentication.
        Use with curl:
        curl -X POST http://localhost:8000/api/test/agent-run       -H "Content-Type: application/json"       -d '{"account_id": "your-account-id", "prompt": "Your prompt here"}'
      operationId: create_local_test_agent_run_api_debug_test_agent_run_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: Body_create_local_test_agent_run_api_debug_test_agent_run_post
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/test/extractors:
    get:
      tags:
        - debug
        - test
      summary: List Extractors
      description: |-
        List all available file extractors.

        Returns information about each registered extractor including
        its name, priority, and availability status.
      operationId: list_extractors_api_debug_test_extractors_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/debug/test/extract-file:
    post:
      tags:
        - debug
        - test
      summary: Extract File
      description: |-
        Extract content from an uploaded file using the appropriate extractor.

        This endpoint is for testing file extraction locally.
        Upload a file and see the extracted content.

        Use with curl:
        curl -X POST http://localhost:8000/api/test/extract-file       -F "file=@document.docx"
      operationId: extract_file_api_debug_test_extract_file_post
      parameters:
        - name: summarize
          in: query
          required: false
          schema:
            type: boolean
            default: false
            title: Summarize
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: Body_extract_file_api_debug_test_extract_file_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/status:
    get:
      tags:
        - debug
        - contracts
      summary: Get Contract Validation Status
      description: |-
        Get current contract validation status.

        Returns:
            Contract validation status including:
            - enabled: Whether validation is currently active
            - runtime_toggle: The runtime toggle state
            - env_mode: Current environment mode
            - last_toggled_at: When the toggle was last changed
      operationId: get_contract_validation_status_api_debug_contracts_status_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/debug/contracts/schemas:
    get:
      tags:
        - debug
        - contracts
      summary: Get Contract Schemas
      description: |-
        Get list of all available contract schemas.

        Returns:
            List of schemas grouped by category (api, entities, client-tools)
      operationId: get_contract_schemas_api_debug_contracts_schemas_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/debug/contracts/schemas/{schema_path}:
    get:
      tags:
        - debug
        - contracts
      summary: Get Schema Content
      description: |-
        Get the content of a specific schema file.

        Args:
            schema_path: Path to the schema file relative to contracts directory

        Returns:
            Schema content as JSON
      operationId: get_schema_content_api_debug_contracts_schemas__schema_path__get
      parameters:
        - name: schema_path
          in: path
          required: true
          schema:
            type: string
            title: Schema Path
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/toggle:
    post:
      tags:
        - debug
        - contracts
      summary: Toggle Contract Validation
      description: |-
        Toggle contract validation on/off.

        Only works in non-production environments.

        Args:
            toggled_by: Identifier of who is toggling (for audit)

        Returns:
            New contract validation status
      operationId: toggle_contract_validation_api_debug_contracts_toggle_post
      parameters:
        - name: toggled_by
          in: query
          required: false
          schema:
            type: string
            default: admin
            title: Toggled By
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/enable:
    post:
      tags:
        - debug
        - contracts
      summary: Enable Contract Validation
      description: |-
        Enable contract validation.

        Only works in non-production environments.
      operationId: enable_contract_validation_api_debug_contracts_enable_post
      parameters:
        - name: toggled_by
          in: query
          required: false
          schema:
            type: string
            default: admin
            title: Toggled By
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/disable:
    post:
      tags:
        - debug
        - contracts
      summary: Disable Contract Validation
      description: |-
        Disable contract validation.

        Only works in non-production environments.
      operationId: disable_contract_validation_api_debug_contracts_disable_post
      parameters:
        - name: toggled_by
          in: query
          required: false
          schema:
            type: string
            default: admin
            title: Toggled By
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/validate/tool-call:
    post:
      tags:
        - debug
        - contracts
      summary: Validate Tool Call Message
      description: |-
        Validate a tool call message against the contract schema.

        Useful for testing if a message conforms to the contract.

        Args:
            message: The tool call message to validate

        Returns:
            Validation result with is_valid and error if any
      operationId: validate_tool_call_message_api_debug_contracts_validate_tool_call_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Message
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/validate/tool-result:
    post:
      tags:
        - debug
        - contracts
      summary: Validate Tool Result Message
      description: |-
        Validate a tool result message against the contract schema.

        Useful for testing if a message conforms to the contract.

        Args:
            message: The tool result message to validate

        Returns:
            Validation result with is_valid and error if any
      operationId: validate_tool_result_message_api_debug_contracts_validate_tool_result_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Message
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/validate/api/{domain}/{operation}:
    post:
      tags:
        - debug
        - contracts
      summary: Validate Api Response
      description: |-
        Validate any API response against its contract schema.

        Args:
            domain: The API domain (threads, messages, runs)
            operation: The operation (list, create, get, start, stop, etc.)
            data: The response data to validate

        Returns:
            Validation result with is_valid and error if any

        Example:
            POST /api/debug/contracts/validate/api/threads/list
            {"threads": [...], "has_more": false, "error": null}
      operationId: validate_api_response_api_debug_contracts_validate_api__domain___operation__post
      parameters:
        - name: domain
          in: path
          required: true
          schema:
            type: string
            title: Domain
        - name: operation
          in: path
          required: true
          schema:
            type: string
            title: Operation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/debug/contracts/validate/entity/{entity_type}:
    post:
      tags:
        - debug
        - contracts
      summary: Validate Entity
      description: |-
        Validate an entity against its contract schema.

        Args:
            entity_type: The entity type (thread, message, project, agent-run)
            data: The entity data to validate

        Returns:
            Validation result with is_valid and error if any

        Example:
            POST /api/debug/contracts/validate/entity/thread
            {"thread_id": "...", "is_public": false, ...}
      operationId: validate_entity_api_debug_contracts_validate_entity__entity_type__post
      parameters:
        - name: entity_type
          in: path
          required: true
          schema:
            type: string
            title: Entity Type
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug:
    get:
      summary: Debug Endpoint
      description: API endpoint returning JSON metrics.
      operationId: debug_endpoint_debug_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/chat:
    post:
      summary: Chat Endpoint
      description: AI chat endpoint.
      operationId: chat_endpoint_debug_chat_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: ChatRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/chat/suggestions:
    get:
      summary: Get Suggestions
      description: Get AI suggestions.
      operationId: get_suggestions_debug_chat_suggestions_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/errors:
    get:
      summary: Get Error Details
      description: Get detailed error information for debugging.
      operationId: get_error_details_debug_errors_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/threads:
    get:
      summary: Get Threads
      description: Get all active threads.
      operationId: get_threads_debug_threads_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/threads/register:
    post:
      summary: Register Thread
      description: Manually register a thread (for frontend agents).
      operationId: register_thread_debug_threads_register_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/timeline/{thread_id}:
    get:
      summary: Get Timeline
      description: |-
        Get unified timeline for a thread (JSON only).

        Returns combined frontend and backend events for the thread.
      operationId: get_timeline_debug_timeline__thread_id__get
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/frontend-logs:
    post:
      summary: Receive Frontend Logs
      description: Receive frontend logs from development mode logger.
      operationId: receive_frontend_logs_debug_frontend_logs_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/frontend-telemetry:
    post:
      summary: Receive Frontend Telemetry
      description: Receive frontend telemetry events and track them as thread events.
      operationId: receive_frontend_telemetry_debug_frontend_telemetry_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
    get:
      summary: Get Frontend Telemetry
      description: Get frontend telemetry data.
      operationId: get_frontend_telemetry_debug_frontend_telemetry_get
      parameters:
        - name: thread_id
          in: query
          required: false
          schema:
            type: string
            title: Thread Id
        - name: minutes
          in: query
          required: false
          schema:
            type: integer
            default: 5
            title: Minutes
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/critical-issues:
    get:
      summary: Get Critical Issues Endpoint
      description: Get current critical system issues.
      operationId: get_critical_issues_endpoint_debug_critical_issues_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/events:
    post:
      summary: Ingest Frontend Events
      description: |-
        Ingest frontend events with event-type dispatch.

        Handles two types of events:
        1. message_received - Routes to record_message_received for trace updates
        2. Other events - Routes to record_frontend_event for general logging

        Rate limited to 200 requests/minute per IP.
        Requires: User must own all agent_run_ids in the batch.
      operationId: ingest_frontend_events_debug_events_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: EventBatchRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/agent-runs/{agent_run_id}/traces:
    get:
      summary: Get Agent Run Traces
      description: |-
        Get message traces for an agent run.

        Args:
            agent_run_id: The agent run to query
            include_payloads: Whether to enrich with Redis payloads.
                If agent run is older than payload TTL (24h), payloads
                will be marked as expired.
      operationId: get_agent_run_traces_debug_agent_runs__agent_run_id__traces_get
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
        - name: include_payloads
          in: query
          required: false
          schema:
            type: boolean
            default: false
            title: Include Payloads
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/agent-runs/{agent_run_id}/events:
    get:
      summary: Get Agent Run Events
      description: Get frontend events for an agent run.
      operationId: get_agent_run_events_debug_agent_runs__agent_run_id__events_get
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
        - name: event_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Event Type
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/agent-runs/{agent_run_id}/analysis:
    get:
      summary: Get Agent Run Analysis
      description: Get cached analysis for an agent run.
      operationId: get_agent_run_analysis_debug_agent_runs__agent_run_id__analysis_get
      parameters:
        - name: agent_run_id
          in: path
          required: true
          schema:
            type: string
            title: Agent Run Id
        - name: analysis_type
          in: query
          required: false
          schema:
            type: string
            default: comprehensive
            title: Analysis Type
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/threads/{thread_id}/agent-runs:
    get:
      summary: Get Thread Agent Runs
      description: Get agent runs for a thread (for debug UI listing).
      operationId: get_thread_agent_runs_debug_threads__thread_id__agent_runs_get
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 50
            title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/threads/{thread_id}/traces:
    get:
      summary: Get Thread Traces
      description: Get traces for all agent runs in a thread.
      operationId: get_thread_traces_debug_threads__thread_id__traces_get
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /debug/threads/{thread_id}/events:
    get:
      summary: Get Thread Events
      description: Get events for all agent runs in a thread.
      operationId: get_thread_events_debug_threads__thread_id__events_get
      parameters:
        - name: thread_id
          in: path
          required: true
          schema:
            type: string
            title: Thread Id
        - name: event_type
          in: query
          required: false
          schema:
            anyOf:
              - type: string
              - type: 'null'
            title: Event Type
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            title: Limit
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers:
    get:
      tags:
        - triggers
      summary: List Triggers
      description: List all triggers for the authenticated user
      operationId: list_triggers_api_triggers_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
    post:
      tags:
        - triggers
      summary: Create Trigger
      description: Create a new trigger
      operationId: create_trigger_api_triggers_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: CreateTriggerApiRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers/{trigger_id}:
    get:
      tags:
        - triggers
      summary: Get Trigger
      description: Get a specific trigger by ID
      operationId: get_trigger_api_triggers__trigger_id__get
      parameters:
        - name: trigger_id
          in: path
          required: true
          schema:
            type: string
            title: Trigger Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
    post:
      tags:
        - triggers
      summary: Update Trigger
      description: Update a trigger
      operationId: update_trigger_api_triggers__trigger_id__post
      parameters:
        - name: trigger_id
          in: path
          required: true
          schema:
            type: string
            title: Trigger Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: UpdateTriggerRequest
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers/{trigger_id}/delete:
    post:
      tags:
        - triggers
      summary: Delete Trigger
      description: Delete a trigger
      operationId: delete_trigger_api_triggers__trigger_id__delete_post
      parameters:
        - name: trigger_id
          in: path
          required: true
          schema:
            type: string
            title: Trigger Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers/{trigger_id}/toggle:
    post:
      tags:
        - triggers
      summary: Toggle Trigger
      description: Toggle trigger active/inactive status
      operationId: toggle_trigger_api_triggers__trigger_id__toggle_post
      parameters:
        - name: trigger_id
          in: path
          required: true
          schema:
            type: string
            title: Trigger Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: ToggleTriggerRequest
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers/createScheduledTaskWithPrompt:
    post:
      tags:
        - triggers
      summary: Create Scheduled Task
      description: Generate scheduled task configuration from a natural language prompt using LLM
      operationId: create_scheduled_task_api_triggers_createScheduledTaskWithPrompt_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: CreateScheduledTaskRequest
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: HTTPValidationError
  /api/triggers/webhook:
    post:
      tags:
        - triggers
      summary: Handle Webhook
      description: Handle QStash webhook for scheduled trigger execution
      operationId: handle_webhook_api_triggers_webhook_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/version:
    get:
      summary: Get Version
      description: Get build version information.
      operationId: get_version_api_version_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: VersionInfo
  /api/health-check:
    get:
      summary: Api Health Check
      description: Legacy health check endpoint for backward compatibility.
      operationId: api_health_check_api_health_check_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
    head:
      summary: Api Health Check
      description: Legacy health check endpoint for backward compatibility.
      operationId: api_health_check_api_health_check_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health:
    get:
      summary: Health Check
      description: |-
        Health check endpoint for monitoring.

        In production, returns minimal information.
        In development/local, returns detailed status.
      operationId: health_check_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
components:
  schemas:
    AddChartMessageRequest:
      $ref: AddChartMessageRequest
    AddThemeMessageRequest:
      $ref: AddThemeMessageRequest
    AdminBulkDeleteRequest:
      $ref: AdminBulkDeleteRequest
    AgentRunIdRequest:
      $ref: AgentRunIdRequest
    AgentStartRequestBody:
      $ref: AgentStartRequestBody
    ApprovalDecisionRequest:
      $ref: ApprovalDecisionRequest
    BatchDownloadRequest:
      $ref: BatchDownloadRequest
    Body_create_local_test_agent_run_api_debug_test_agent_run_post:
      $ref: Body_create_local_test_agent_run_api_debug_test_agent_run_post
    Body_create_project_file_api_project__project_id__files_post:
      $ref: Body_create_project_file_api_project__project_id__files_post
    Body_export_to_onedrive_api_project__project_id__onedrive_export_post:
      $ref: Body_export_to_onedrive_api_project__project_id__onedrive_export_post
    Body_extract_file_api_debug_test_extract_file_post:
      $ref: Body_extract_file_api_debug_test_extract_file_post
    Body_generate_video_from_assets_api_ai_presenter_generate_video_post:
      $ref: Body_generate_video_from_assets_api_ai_presenter_generate_video_post
    Body_train_voiceprint_api_ai_presenter_training_post:
      $ref: Body_train_voiceprint_api_ai_presenter_training_post
    Body_upload_avatar_api_ai_presenter_avatar_post:
      $ref: Body_upload_avatar_api_ai_presenter_avatar_post
    Body_upload_document_endpoint_api_memory_upload_document_post:
      $ref: Body_upload_document_endpoint_api_memory_upload_document_post
    Body_upload_project_file_api_projects__project_id__files_upload_post:
      $ref: Body_upload_project_file_api_projects__project_id__files_upload_post
    Body_upload_skill_api_user_skills_upload_post:
      $ref: Body_upload_skill_api_user_skills_upload_post
    BulkDeleteRequest:
      $ref: BulkDeleteRequest
    ChatRequest:
      $ref: ChatRequest
    CreateProjectRequest:
      $ref: CreateProjectRequest
    CreateScheduledTaskRequest:
      $ref: CreateScheduledTaskRequest
    CreateTriggerApiRequest:
      $ref: CreateTriggerApiRequest
    DeleteProjectRequest:
      $ref: DeleteProjectRequest
    DisconnectRequest:
      $ref: DisconnectRequest
    DocumentReadResponse:
      $ref: DocumentReadResponse
    ErrorResponse:
      $ref: ErrorResponse
    EventBatchRequest:
      $ref: EventBatchRequest
    ExecuteWriteRequest:
      $ref: ExecuteWriteRequest
    FavoriteAddRequest:
      $ref: FavoriteAddRequest
    FavoriteListRequest:
      $ref: FavoriteListRequest
    FavoriteRemoveRequest:
      $ref: FavoriteRemoveRequest
    FavoriteToggleRequest:
      $ref: FavoriteToggleRequest
    FileListResponse:
      $ref: FileListResponse
    FileSummarizationPreferences:
      $ref: FileSummarizationPreferences
    FileUploadRequest:
      $ref: FileUploadRequest
    FileUploadResponse:
      $ref: FileUploadResponse
    FrontendEvent:
      $ref: FrontendEvent
    FrontendLogsRequest:
      $ref: FrontendLogsRequest
    GenerateSuggestionsRequest:
      $ref: GenerateSuggestionsRequest
    GetProjectRequest:
      $ref: GetProjectRequest
    GoogleAuthCallbackResponse:
      $ref: GoogleAuthCallbackResponse
    GoogleAuthInitiateResponse:
      $ref: GoogleAuthInitiateResponse
    HTTPValidationError:
      $ref: HTTPValidationError
    LLMConfigResponse:
      $ref: LLMConfigResponse
    LLMParameterLimits:
      $ref: LLMParameterLimits
    ListMessagesRequest:
      $ref: ListMessagesRequest
    LogEntry:
      $ref: LogEntry
    MessageAddRequestBody:
      $ref: MessageAddRequestBody
    ModelInfo:
      $ref: ModelInfo
    OAuthCallbackResponse:
      $ref: OAuthCallbackResponse
    OAuthInitiateRequest:
      $ref: OAuthInitiateRequest
    OAuthInitiateResponse:
      $ref: OAuthInitiateResponse
    PaginationRequest:
      $ref: PaginationRequest
    PaginationResponse:
      $ref: PaginationResponse
    ProjectIdRequest:
      $ref: ProjectIdRequest
    QuickStartRequest:
      $ref: QuickStartRequest
    QuickStartResponse:
      $ref: QuickStartResponse
    StandardResponse:
      $ref: StandardResponse
    TTSRequest:
      $ref: TTSRequest
    ThreadCreateRequest:
      $ref: ThreadCreateRequest
    ThreadGetRequest:
      $ref: ThreadGetRequest
    ThreadIdRequest:
      $ref: ThreadIdRequest
    ThreadListRequest:
      $ref: ThreadListRequest
    ThreadSearchRequest:
      $ref: ThreadSearchRequest
    ToggleSkillRequest:
      $ref: ToggleSkillRequest
    ToggleTriggerRequest:
      $ref: ToggleTriggerRequest
    TriggerType:
      $ref: TriggerType
    UpdateGdprConsentRequest:
      $ref: UpdateGdprConsentRequest
    UpdateProjectRequest:
      $ref: UpdateProjectRequest
    UpdateThrottleRuleRequest:
      $ref: UpdateThrottleRuleRequest
    UpdateTriggerRequest:
      $ref: UpdateTriggerRequest
    ValidationError:
      $ref: ValidationError
    VersionInfo:
      $ref: VersionInfo
    VideoGenerationResponse:
      $ref: VideoGenerationResponse
    VolcengineBaseResponse:
      $ref: VolcengineBaseResponse
    VolcengineTrainingListResponse:
      $ref: VolcengineTrainingListResponse
    VolcengineTrainingStatus:
      $ref: VolcengineTrainingStatus
    WorkflowVars:
      $ref: WorkflowVars
  parameters:
    ThreadIdPath:
      name: thread_id
      in: path
      required: true
      schema:
        type: string
      description: Thread identifier (UUID)
      example: 123e4567-e89b-12d3-a456-426614174000
    ProjectIdPath:
      name: project_id
      in: path
      required: true
      schema:
        type: string
      description: Project identifier (UUID)
      example: 123e4567-e89b-12d3-a456-426614174000
    AgentRunIdPath:
      name: agent_run_id
      in: path
      required: true
      schema:
        type: string
      description: Agent run identifier (UUID)
      example: 123e4567-e89b-12d3-a456-426614174000
  responses:
    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            $ref: HTTPValidationError
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: ErrorResponse
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: ErrorResponse
